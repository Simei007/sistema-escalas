<div class="container">
  <div class="banner-motorista">
    <img src="/expresso-sem-fundo.png" alt="Logo Expresso" />

  </div>

  <div class="modal-overlay" *ngIf="avisoModalAberto" (click)="fecharModalAviso()">
    <div class="modal-aviso" (click)="$event.stopPropagation()">
      <h3>Aviso Importante</h3>
      <p>Favor cumprir os horarios com pontualidade.</p>
      <p>Em caso de duvidas, entrar em contato com o trafego.</p>
      <ul>
        <li>Nao esquecer o pendrive de telemetria.</li>
        <li>Conferir as informacoes nos discos TCO.</li>
        <li>Verificar se ha folha de ponto em seu nome para preenchimento.</li>
      </ul>
      <button type="button" (click)="fecharModalAviso()">Entendi</button>
    </div>
  </div>

  <div class="topo">
    <h2>Painel do Motorista</h2>
    <button type="button" class="btn-sair" (click)="sair()">Sair</button>
  </div>

  <p class="subtitle">Bem-vindo, {{ nomeMotorista }}. Confira sua escala.</p>

  <p *ngIf="erro" class="erro">{{ erro }}</p>

  <div class="proxima" *ngIf="!carregando && proximaEscala as escala">
    <h3>Proxima Escala</h3>
    <p><strong>Data:</strong> {{ formatarDataBr(escala.data) }}</p>
    <p><strong>Inicio da Jornada:</strong> {{ formatarHoraSemSegundos(escala.hora_inicio) }}</p>
    <p><strong>Hora da Saida:</strong> {{ formatarHoraSemSegundos(escala.hora_saida) }}</p>
    <p><strong>Saida:</strong> {{ escala.saida }}</p>
  </div>

  <div class="card">
    <div class="header-lista">
      <h3>Minha Escala</h3>
      <button type="button" (click)="carregarEscalas()" [disabled]="carregando">{{ carregando ? 'Atualizando...' :
        'Atualizar' }}</button>
    </div>

    <table *ngIf="!carregando && escalas.length > 0">
      <thead>
        <tr>
          <th>Data</th>
          <th>Inicio Jornada</th>
          <th>Hora Saida</th>
          <th>Saida</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let escala of escalas">
          <td>{{ formatarDataBr(escala.data) }}</td>
          <td>{{ formatarHoraSemSegundos(escala.hora_inicio) }}</td>
          <td>{{ formatarHoraSemSegundos(escala.hora_saida) }}</td>
          <td>{{ escala.saida }}</td>
        </tr>
      </tbody>
    </table>

    <p *ngIf="carregando" class="vazio">Carregando escala...</p>
    <p *ngIf="!carregando && escalas.length === 0" class="vazio">Nenhuma escala cadastrada.</p>
  </div>
</div>

